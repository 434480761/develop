#用于titan环境初始化（创建属性与索引）--更新时间：2016.10.13
:> mgmt = graph.openManagement();ti_entry = mgmt.makePropertyKey('ti_entry').dataType(String.class).cardinality(Cardinality.SINGLE).make();ti_format = mgmt.makePropertyKey('ti_format').dataType(String.class).cardinality(Cardinality.SINGLE).make();ti_location = mgmt.makePropertyKey('ti_location').dataType(String.class).cardinality(Cardinality.SINGLE).make();ti_md5 = mgmt.makePropertyKey('ti_md5').dataType(String.class).cardinality(Cardinality.SINGLE).make();ti_requirements = mgmt.makePropertyKey('ti_requirements').dataType(String.class).cardinality(Cardinality.SINGLE).make();ti_secure_key = mgmt.makePropertyKey('ti_secure_key').dataType(String.class).cardinality(Cardinality.SINGLE).make();ti_size = mgmt.makePropertyKey('ti_size').dataType(Long.class).cardinality(Cardinality.SINGLE).make();ti_title = mgmt.makePropertyKey('ti_title').dataType(String.class).cardinality(Cardinality.SINGLE).make();identifier = mgmt.makePropertyKey('identifier').dataType(String.class).cardinality(Cardinality.SINGLE).make();primary_category = mgmt.makePropertyKey('primary_category').dataType(String.class).cardinality(Cardinality.SINGLE).make();lc_enable = mgmt.makePropertyKey('lc_enable').dataType(Boolean.class).cardinality(Cardinality.SINGLE).make();taxoncode= mgmt.makePropertyKey('cg_taxoncode').dataType(String.class).cardinality(Cardinality.SINGLE).make();taxonname= mgmt.makePropertyKey('cg_taxonname').dataType(String.class).cardinality(Cardinality.SINGLE).make();shortName= mgmt.makePropertyKey('cg_short_name').dataType(String.class).cardinality(Cardinality.SINGLE).make();categoryCode= mgmt.makePropertyKey('cg_category_code').dataType(String.class).cardinality(Cardinality.SINGLE).make();categoryName= mgmt.makePropertyKey('cg_category_name').dataType(String.class).cardinality(Cardinality.SINGLE).make();taxonpath= mgmt.makePropertyKey('cg_taxonpath').dataType(String.class).cardinality(Cardinality.SINGLE).make();target = mgmt.makePropertyKey('target').dataType(String.class).cardinality(Cardinality.SINGLE).make();strategy = mgmt.makePropertyKey('strategy').dataType(String.class).cardinality(Cardinality.SINGLE).make();target_type = mgmt.makePropertyKey('target_type').dataType(String.class).cardinality(Cardinality.SINGLE).make();search_code = mgmt.makePropertyKey('search_code').dataType(String.class).cardinality(Cardinality.SET).make();search_path = mgmt.makePropertyKey('search_path').dataType(String.class).cardinality(Cardinality.SET).make();search_coverage = mgmt.makePropertyKey('search_coverage').dataType(String.class).cardinality(Cardinality.SET).make();mgmt.buildIndex('comp_identifier', Vertex.class).addKey(identifier).buildCompositeIndex();mgmt.buildIndex('comp_identifier_type_enable', Vertex.class).addKey(primary_category).addKey(identifier).addKey(lc_enable).buildCompositeIndex();mgmt.buildIndex('comp_search_base', Vertex.class).addKey(primary_category).addKey(lc_enable).addKey(search_coverage).buildCompositeIndex();mgmt.buildIndex('comp_search_code_with_base', Vertex.class).addKey(primary_category).addKey(lc_enable).addKey(search_coverage).addKey(search_code).buildCompositeIndex();mgmt.buildIndex('comp_search_path_with_base', Vertex.class).addKey(primary_category).addKey(lc_enable).addKey(search_coverage).addKey(search_path).buildCompositeIndex();mgmt.buildIndex('comp_search_path_and_code_with_base', Vertex.class).addKey(primary_category).addKey(lc_enable).addKey(search_coverage).addKey(search_path).addKey(search_code).buildCompositeIndex();mgmt.buildIndex('comp_edge_identifier', Edge.class).addKey(identifier).buildCompositeIndex();mgmt.buildIndex('comp_taxoncode', Vertex.class).addKey(taxoncode).buildCompositeIndex();mgmt.buildIndex('comp_coverages', Vertex.class).addKey(target).addKey(strategy).addKey(target_type).buildCompositeIndex();mgmt.buildIndex('comp_taxonpath', Vertex.class).addKey(taxonpath).buildCompositeIndex();mgmt.buildIndex('comp_target_type', Vertex.class).addKey(target).addKey(target_type).buildCompositeIndex();description = mgmt.makePropertyKey('description').dataType(String.class).cardinality(Cardinality.SINGLE).make();title = mgmt.makePropertyKey('title').dataType(String.class).cardinality(Cardinality.SINGLE).make();lc_create_time = mgmt.makePropertyKey('lc_create_time').dataType(Long.class).cardinality(Cardinality.SINGLE).make();lc_last_update = mgmt.makePropertyKey('lc_last_update').dataType(Long.class).cardinality(Cardinality.SINGLE).make();preview = mgmt.makePropertyKey('preview').dataType(String.class).cardinality(Cardinality.SINGLE).make();tags = mgmt.makePropertyKey('tags').dataType(String.class).cardinality(Cardinality.SINGLE).make();keywords = mgmt.makePropertyKey('keywords').dataType(String.class).cardinality(Cardinality.SINGLE).make();language = mgmt.makePropertyKey('language').dataType(String.class).cardinality(Cardinality.SINGLE).make();custom_properties = mgmt.makePropertyKey('custom_properties').dataType(String.class).cardinality(Cardinality.SINGLE).make();lc_provider_source = mgmt.makePropertyKey('lc_provider_source').dataType(String.class).cardinality(Cardinality.SINGLE).make();lc_version = mgmt.makePropertyKey('lc_version').dataType(String.class).cardinality(Cardinality.SINGLE).make();lc_status = mgmt.makePropertyKey('lc_status').dataType(String.class).cardinality(Cardinality.SINGLE).make();lc_creator = mgmt.makePropertyKey('lc_creator').dataType(String.class).cardinality(Cardinality.SINGLE).make();lc_provider = mgmt.makePropertyKey('lc_provider').dataType(String.class).cardinality(Cardinality.SINGLE).make();lc_publisher = mgmt.makePropertyKey('lc_publisher').dataType(String.class).cardinality(Cardinality.SINGLE).make();cr_right = mgmt.makePropertyKey('cr_right').dataType(String.class).cardinality(Cardinality.SINGLE).make();cr_description = mgmt.makePropertyKey('cr_description').dataType(String.class).cardinality(Cardinality.SINGLE).make();cr_author = mgmt.makePropertyKey('cr_author').dataType(String.class).cardinality(Cardinality.SINGLE).make();edu_interactivity = mgmt.makePropertyKey('edu_interactivity').dataType(Integer.class).cardinality(Cardinality.SINGLE).make();edu_interactivity_level = mgmt.makePropertyKey('edu_interactivity_level').dataType(Integer.class).cardinality(Cardinality.SINGLE).make();edu_end_user_type = mgmt.makePropertyKey('edu_end_user_type').dataType(String.class).cardinality(Cardinality.SINGLE).make();edu_semantic_density = mgmt.makePropertyKey('edu_semantic_density').dataType(Integer.class).cardinality(Cardinality.SINGLE).make();edu_age_range = mgmt.makePropertyKey('edu_age_range').dataType(String.class).cardinality(Cardinality.SINGLE).make();edu_difficulty = mgmt.makePropertyKey('edu_difficulty').dataType(String.class).cardinality(Cardinality.SINGLE).make();edu_learning_time = mgmt.makePropertyKey('edu_learning_time').dataType(String.class).cardinality(Cardinality.SINGLE).make();edu_description = mgmt.makePropertyKey('edu_description').dataType(String.class).cardinality(Cardinality.SINGLE).make();edu_language = mgmt.makePropertyKey('edu_language').dataType(String.class).cardinality(Cardinality.SINGLE).make();enable = mgmt.makePropertyKey('enable').dataType(Boolean.class).cardinality(Cardinality.SINGLE).make();order_num = mgmt.makePropertyKey('order_num').dataType(Float.class).cardinality(Cardinality.SINGLE).make();rr_label = mgmt.makePropertyKey('rr_label').dataType(String.class).cardinality(Cardinality.SINGLE).make();relation_type = mgmt.makePropertyKey('relation_type').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_isbn = mgmt.makePropertyKey('ext_isbn').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_attachments = mgmt.makePropertyKey('ext_attachments').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_criterion = mgmt.makePropertyKey('ext_criterion').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_edition = mgmt.makePropertyKey('ext_edition').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_grade = mgmt.makePropertyKey('ext_grade').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_phase = mgmt.makePropertyKey('ext_phase').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_subject = mgmt.makePropertyKey('ext_subject').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_is_auto_remark = mgmt.makePropertyKey('ext_is_auto_remark').dataType(Boolean.class).cardinality(Cardinality.SINGLE).make();ext_question_type = mgmt.makePropertyKey('ext_question_type').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_suggest_duration = mgmt.makePropertyKey('ext_suggest_duration').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_discrimination = mgmt.makePropertyKey('ext_discrimination').dataType(Float.class).cardinality(Cardinality.SINGLE).make();ext_answer = mgmt.makePropertyKey('ext_answer').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_item_content = mgmt.makePropertyKey('ext_item_content').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_score = mgmt.makePropertyKey('ext_score').dataType(Float.class).cardinality(Cardinality.SINGLE).make();ext_source = mgmt.makePropertyKey('ext_source').dataType(String.class).cardinality(Cardinality.SINGLE).make();ext_secrecy = mgmt.makePropertyKey('ext_secrecy').dataType(Integer.class).cardinality(Cardinality.SINGLE).make();ext_modified_difficulty = mgmt.makePropertyKey('ext_modified_difficulty').dataType(Float.class).cardinality(Cardinality.SINGLE).make();ext_ext_difficulty = mgmt.makePropertyKey('ext_ext_difficulty').dataType(Float.class).cardinality(Cardinality.SINGLE).make();ext_modified_discrimination = mgmt.makePropertyKey('ext_modified_discrimination').dataType(Float.class).cardinality(Cardinality.SINGLE).make();ext_used_time = mgmt.makePropertyKey('ext_used_time').dataType(Integer.class).cardinality(Cardinality.SINGLE).make();ext_exposal_date = mgmt.makePropertyKey('ext_exposal_date').dataType(Long.class).cardinality(Cardinality.SINGLE).make();ext_auto_remark = mgmt.makePropertyKey('ext_auto_remark').dataType(Boolean.class).cardinality(Cardinality.SINGLE).make();context_type = mgmt.makePropertyKey('context_type').dataType(String.class).cardinality(Cardinality.SINGLE).make();context_object = mgmt.makePropertyKey('context_object').dataType(String.class).cardinality(Cardinality.SINGLE).make();search_code_string = mgmt.makePropertyKey('search_code_string').dataType(String.class).cardinality(Cardinality.SINGLE).make();search_path_string = mgmt.makePropertyKey('search_path_string').dataType(String.class).cardinality(Cardinality.SINGLE).make();search_coverage_string = mgmt.makePropertyKey('search_coverage_string').dataType(String.class).cardinality(Cardinality.SINGLE).make();m_identifier = mgmt.makePropertyKey('m_identifier').dataType(String.class).cardinality(Cardinality.SINGLE).make();edu_context = mgmt.makePropertyKey('edu_context').dataType(String.class).cardinality(Cardinality.SINGLE).make();ndres_code = mgmt.makePropertyKey('ndres_code').dataType(String.class).cardinality(Cardinality.SINGLE).make();cr_has_right = mgmt.makePropertyKey('cr_has_right').dataType(Boolean.class).cardinality(Cardinality.SINGLE).make();cr_right_start_date = mgmt.makePropertyKey('cr_right_start_date').dataType(String.class).cardinality(Cardinality.SINGLE).make();cr_right_end_date = mgmt.makePropertyKey('cr_right_end_date').dataType(String.class).cardinality(Cardinality.SINGLE).make();lc_provider_mode = mgmt.makePropertyKey('lc_provider_mode').dataType(String.class).cardinality(Cardinality.SINGLE).make();sort_num = mgmt.makePropertyKey('sort_num').dataType(String.class).cardinality(Cardinality.SINGLE).make();res_type = mgmt.makePropertyKey('res_type').dataType(String.class).cardinality(Cardinality.SINGLE).make();source_uuid = mgmt.makePropertyKey('source_uuid').dataType(String.class).cardinality(Cardinality.SINGLE).make();resource_target_type = mgmt.makePropertyKey('resource_target_type').dataType(String.class).cardinality(Cardinality.SINGLE).make();target_uuid = mgmt.makePropertyKey('target_uuid').dataType(String.class).cardinality(Cardinality.SINGLE).make();tree_order = mgmt.makePropertyKey('tree_order_num').dataType(Float.class).cardinality(Cardinality.SINGLE).make();hasChapter = mgmt.makeEdgeLabel('tree_has_chapters').make();hasKnowledge = mgmt.makeEdgeLabel('tree_has_knowledges').make();mgmt.buildEdgeIndex(hasChapter,'edge_index_chapter_order',Direction.OUT,Order.decr,tree_order);mgmt.buildEdgeIndex(hasKnowledge,'edge_index_knowledge_order',Direction.OUT,Order.decr,tree_order);st_title=mgmt.makePropertyKey('sta_title').dataType(String.class).cardinality(Cardinality.SINGLE).make();resource=mgmt.makePropertyKey('sta_resource').dataType(String.class).cardinality(Cardinality.SINGLE).make();key_title=mgmt.makePropertyKey('sta_key_title').dataType(String.class).cardinality(Cardinality.SINGLE).make();key_value=mgmt.makePropertyKey('sta_key_value').dataType(Double.class).cardinality(Cardinality.SINGLE).make();update_time=mgmt.makePropertyKey('sta_update_time').dataType(String.class).cardinality(Cardinality.SINGLE).make();data_from=mgmt.makePropertyKey('sta_data_from').dataType(String.class).cardinality(Cardinality.SINGLE).make();res_type=mgmt.makePropertyKey('sta_res_type').dataType(String.class).cardinality(Cardinality.SINGLE).make();has_statistical = mgmt.makeEdgeLabel('has_resource_statistical').make();mgmt.buildEdgeIndex(has_statistical,'edge_index_key_value_with_statisticals',Direction.OUT,Order.decr,key_value);mgmt.buildIndex('comp_edge_resource_with_statisticals', Edge.class).addKey(resource).buildCompositeIndex();mgmt.buildIndex('comp_vertex_resource_with_statisticals', Vertex.class).addKey(resource).buildCompositeIndex();ti_printable = mgmt.makePropertyKey('ti_printable').dataType(Boolean.class).cardinality(Cardinality.SINGLE).make();source_r_primary_category = mgmt.makePropertyKey('source_r_primary_category').dataType(String.class).cardinality(Cardinality.SINGLE).make();source_r_lc_enable = mgmt.makePropertyKey('source_r_lc_enable').dataType(Boolean.class).cardinality(Cardinality.SINGLE).make();source_r_lc_create_time = mgmt.makePropertyKey('source_r_lc_create_time').dataType(Long.class).cardinality(Cardinality.SINGLE).make();source_r_lc_last_update = mgmt.makePropertyKey('source_r_lc_last_update').dataType(Long.class).cardinality(Cardinality.SINGLE).make();source_r_lc_status = mgmt.makePropertyKey('source_r_lc_status').dataType(String.class).cardinality(Cardinality.SINGLE).make();source_r_search_code_string = mgmt.makePropertyKey('source_r_search_code_string').dataType(String.class).cardinality(Cardinality.SINGLE).make();source_r_search_path_string = mgmt.makePropertyKey('source_r_search_path_string').dataType(String.class).cardinality(Cardinality.SINGLE).make();source_r_search_coverage_string = mgmt.makePropertyKey('source_r_search_coverage_string').dataType(String.class).cardinality(Cardinality.SINGLE).make();target_r_primary_category = mgmt.makePropertyKey('target_r_primary_category').dataType(String.class).cardinality(Cardinality.SINGLE).make();target_r_lc_enable = mgmt.makePropertyKey('target_r_lc_enable').dataType(Boolean.class).cardinality(Cardinality.SINGLE).make();target_r_lc_create_time = mgmt.makePropertyKey('target_r_lc_create_time').dataType(Long.class).cardinality(Cardinality.SINGLE).make();target_r_lc_last_update = mgmt.makePropertyKey('target_r_lc_last_update').dataType(Long.class).cardinality(Cardinality.SINGLE).make();target_r_lc_status = mgmt.makePropertyKey('target_r_lc_status').dataType(String.class).cardinality(Cardinality.SINGLE).make();target_r_search_code_string = mgmt.makePropertyKey('target_r_search_code_string').dataType(String.class).cardinality(Cardinality.SINGLE).make();target_r_search_path_string = mgmt.makePropertyKey('target_r_search_path_string').dataType(String.class).cardinality(Cardinality.SINGLE).make();target_r_search_coverage_string = mgmt.makePropertyKey('target_r_search_coverage_string').dataType(String.class).cardinality(Cardinality.SINGLE).make();search_code = mgmt.getPropertyKey('search_code');search_path = mgmt.getPropertyKey('search_path');search_coverage = mgmt.getPropertyKey('search_coverage');mgmt.buildIndex('mixed_ndresource', Vertex.class).addKey(primary_category,Mapping.STRING.asParameter()).addKey(lc_enable).addKey(identifier,Mapping.STRING.asParameter()).addKey(description,Mapping.TEXTSTRING.asParameter()).addKey(title,Mapping.TEXTSTRING.asParameter()).addKey(tags,Mapping.TEXTSTRING.asParameter()).addKey(keywords,Mapping.TEXTSTRING.asParameter()).addKey(language,Mapping.TEXTSTRING.asParameter()).addKey(lc_status,Mapping.STRING.asParameter()).addKey(lc_creator,Mapping.STRING.asParameter()).addKey(lc_provider,Mapping.STRING.asParameter()).addKey(cr_description,Mapping.TEXTSTRING.asParameter()).addKey(cr_author,Mapping.STRING.asParameter()).addKey(edu_difficulty,Mapping.STRING.asParameter()).addKey(edu_description,Mapping.TEXTSTRING.asParameter()).addKey(edu_language,Mapping.STRING.asParameter()).addKey(lc_publisher,Mapping.STRING.asParameter()).addKey(search_code_string,Mapping.STRING.asParameter()).addKey(search_code,Mapping.STRING.asParameter()).addKey(search_path,Mapping.STRING.asParameter()).addKey(search_coverage,Mapping.STRING.asParameter()).addKey(search_path_string,Mapping.STRING.asParameter()).addKey(search_coverage_string,Mapping.STRING.asParameter()).addKey(lc_create_time).addKey(lc_last_update).buildMixedIndex("search");mgmt.buildIndex('comp_identifier_type', Vertex.class).addKey(primary_category).addKey(identifier).buildCompositeIndex();has_relation=mgmt.makeEdgeLabel('has_relation').make();mgmt.buildEdgeIndex(has_relation,'new_edge_index_default_properties_t',Direction.OUT,Order.decr,enable,target_r_primary_category,target_r_lc_enable,target_r_search_coverage_string);mgmt.buildEdgeIndex(has_relation,'new_edge_index_default_properties_s',Direction.IN,Order.decr,enable,source_r_primary_category,source_r_lc_enable,source_r_search_coverage_string);mgmt.commit();
